{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <h2>Toplu Ürün Yükle (Excel veya .csv)</h2>
    <hr>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{% if message.tags == 'error' %}danger{% elif message.tags == 'success' %}success{% else %}info{% endif %}">{{ message }}</div>
      {% endfor %}
    {% endif %}

    {% if upload_errors %}
    <div class="alert alert-warning">
      <strong>Yükleme sırasında karşılaşılan bazı hatalar:</strong>
      <ul>
        {% for error in upload_errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <div class="alert alert-info">
      <strong>Dosya Formatı</strong>
      <p class="mb-1">
        Yüklenecek Excel veya CSV dosyasında aşağıdaki başlıklar bulunmalıdır (Sırası önemli değildir):
      </p>
      <pre class="mb-2 bg-light p-2 rounded">BARKOD;ILAC;FIRMA</pre>
      <p class="small text-muted mb-2">Not: CSV dosyaları için ayırıcı noktalı virgül (;) olmalıdır.</p>
    </div>

    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="mb-3">
        <label for="csv_file" class="form-label">Ürün Listesi (.xlsx veya .csv dosyası)</label>
        <input class="form-control" type="file" id="csv_file" name="csv_file" accept=".csv, .xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" required>
      </div>
      <button type="submit" class="btn btn-primary">Yükle ve Kaydet</button>
    </form>
  </div>
</div>
{% endblock %}